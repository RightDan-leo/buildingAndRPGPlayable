# Survival Tower Defense 3D - 设计说明书 (Design Spec)

## 1. 核心玩法 (Core Gameplay)

**类型**: 移动基地生存 + 塔防 + 自动化
**目标**: 护送“营地”（马车/基地）从地图起点（上）移动到终点（下），耗时约 2 分钟。
**失败条件**: 营地血量归零。

## 2. 游戏循环 (Game Loop)

1. **移动 (Move)**: 营地自动缓慢向前移动。
2. **采集 (Gather)**:
    * **木头 (Wood)**: 玩家砍树获得。用途：修复营地、**防御塔弹药**、建造建筑。
    * **能量石 (Energy Stone)**: 击败怪物掉落。用途：在酒馆抽奖（三选一），获得英雄/升级/自动化工人。
3. **战斗 (Combat)**:
    * 怪物不断刷新攻击营地。
    * 玩家可攻击。
    * **防御塔**: 位于营地上，自动攻击，需要**消耗木头**作为弹药。
4. **自动化 (Automation)**:
    * 解锁“伐木工”自动砍树，运送木头给防御塔。

## 3. 详细流程 (基于截图)

* **步骤 1 (开始)**: 破败营地，冒烟。
* **步骤 2 (修复)**: 引导玩家砍树 -> 修复营地（变出“酒馆”模型） -> 营地开始移动。
* **步骤 3 (初次战斗)**: 怪物来袭 -> 掉落能量石 -> 酒馆三选一 -> 获得“英雄上箭塔”。
* **步骤 4 (弹药)**: 引导玩家砍树 -> 给箭塔补充弹药。
* **步骤 5-8 (循环)**: 怪物变强 -> 消耗变大 -> 宝箱（提升主角） -> 解锁伐木场。
* **步骤 9 (自动化)**: 用能量石抽取“伐木工” -> 自动化。
* **步骤 15 (Boss/终局)**: 2分钟抵达终点 -> BOSS战 -> 胜利/失败广告。

## 4. 技术实现 (Technical)

* **地图**: 狭长的 Z 轴跑道。
* **Camp (营地)**: `THREE.Group`，包含核心碰撞体、塔位、视觉模型。每帧 `position.z += speed`。
* **Audio (音频)**: 使用 SynthAudio (AudioContext) 实现 砍树、射击、建造、背景音。
* **NavMesh (导航)**: 简单的地面寻路或直接向目标移动。

## 5. 关键数值

* **游戏时长**: ~120秒路程。
* **营地速度**: 地图长度 / 120。
* **木头**: 树木 HP 3，掉落 5 木头。塔每次射击消耗 1 木头。
