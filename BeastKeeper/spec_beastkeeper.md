# BeastKeeper - 巨兽收容所 3D Game Specification

## 1. 游戏概述

### 核心概念

玩家经营"巨兽收容所"，体验"捕获-养成-征战"的完整循环。

### 核心卖点

- 反差萌（幼崽vs巨兽）
- 割草爽感
- 收集养成成就感

### 一句话描述

玩家经营一个巨兽收容所，捕获受伤幼兽、喂养治疗、带着进化后的巨兽出去战斗。

---

## 2. 角色设定

| 角色 | 描述 | 进化路线 |
|------|------|----------|
| 格温妮 (Gwyneth) | 英雄主角 | - |
| 九头蛇 (Hydra) | 初始小蛇 | 幼崽 → 健康 → 巨型九头蛇 |
| 雷鹏鸟 (Thunder Bird) | 初始小鸟 | 幼崽 → 健康 → 巨型雷鹏鸟 |
| 黑暗灵 (Dark Spirit) | 杂鱼敌人 | - |
| 最终BOSS | 暗黑巨兽 | - |

---

## 3. 建筑系统

| 建筑 | 功能 | 升级效果 |
|------|------|----------|
| 造肉厂 (Meat Factory) | 自动产肉 | 产出效率提升 |
| 工人小屋 (Worker Hut) | 生成4个工人 | 自动收集资源 |

---

## 4. 资源系统

| 资源 | 用途 | 获取方式 |
|------|------|----------|
| 肉块 (Meat) | 喂养巨兽 | 造肉厂、击杀敌人 |
| 金币 (Coins) | 建造/升级 | 击杀敌人 |

---

## 5. 15步解锁流程（严格顺序）

> **重要**: 每一步必须可达成，且完成后自动进入下一步

| 步骤 | 事件 | 触发条件 | 资源需求 | 备注 |
|------|------|----------|----------|------|
| **1** | 捕获受伤的九头蛇 | 游戏开始 | 无 | 靠近九头蛇自动捕获 |
| **2** | 用肉块喂养九头蛇 | 九头蛇已捕获 | 10肉块（初始资源） | 一次喂满进度条 |
| **3** | 九头蛇恢复健康，可自动攻击敌人 | 喂食进度满 | 无 | 自动触发 |
| **4** | 敌人开始来袭 | 九头蛇健康后 | 无 | 敌人掉落金币 |
| **5** | 建造造肉厂 | 收集50金币 | 50金币 | 自动产肉 |
| **6** | 城外发现雷鹏鸟 | 造肉厂建成后 | 无 | 延迟2秒出现 |
| **7** | 捕获受伤的雷鹏鸟 | 发现后 | 无 | 靠近自动捕获 |
| **8** | 喂食雷鹏鸟变健康 | 雷鹏鸟已捕获 | 10肉块 | 造肉厂已产出 |
| **9** | 建造工人小屋 | 收集80金币 | 80金币 | 4工人自动收集 |
| **10** | 升级造肉厂 | 收集100金币 | 100金币 | 产肉效率翻倍 |
| **11** | 九头蛇进化为巨型 | 第二次喂满 | 10肉块 | 战斗力暴增 |
| **12** | 雷鹏鸟进化为巨型 | 第二次喂满 | 10肉块 | 战斗力暴增 |
| **13** | 最终BOSS出现 | 两兽都进化后 | 无 | 5秒后生成 |
| **14** | 击败BOSS | 战斗胜利 | 无 | HP降至0 |
| **15** | 胜利画面 | BOSS死亡 | 无 | 下载按钮+重新开始 |

---

## 6. 资源平衡

### 初始资源

- 肉块: **15** (足够第一次喂养)
- 金币: **0**

### 喂养成本

- 每次喂养消耗: **10肉块**
- 一次喂满即可进化

### 敌人掉落

- 每只黑暗灵: **15金币** + 30%概率掉落2肉块
- BOSS: 100金币 + 20肉块

---

## 7. 操作方式

- **WASD**: 键盘移动
- **虚拟摇杆**: 触屏/鼠标拖拽
- **教程**: 游戏开始前显示摇杆教程，静止等待玩家首次操作

---

## 8. 技术规格

- **引擎**: Three.js
- **视角**: 3D俯视角 (Orthographic Camera)
- **文件**: 单HTML文件，内嵌所有代码和资源
- **兼容**: PC + 移动端触屏

---

## 9. 实现细节

### 手动喂食系统

- 玩家通过UI面板的"喂食"按钮手动喂养巨兽
- 按钮显示肉块消耗量（如"🥩 喂食 (10肉块)"）
- 使用巨兽类型 (`hydra`/`thunderbird`) 作为标识符，避免数组索引问题

### 建筑标签可见性

建筑标签根据游戏步骤动态显示/隐藏：

| 标签 | 显示条件 |
|------|----------|
| 造肉厂 | step ≥ 4 且未建造 |
| 工人小屋 | step ≥ 8 且未建造 |
| 升级造肉厂 | step ≥ 9 且造肉厂已建造且未升级 |

### 步骤触发逻辑

- 建造造肉厂：在 step ≥ 4 时触发，完成后推进至 step 6（触发雷鹏鸟出现）
- 建造工人小屋：在 step ≥ 8 时触发，完成后推进至 step 9
- 升级造肉厂：在 step ≥ 9 时触发，完成后推进至 step 10
