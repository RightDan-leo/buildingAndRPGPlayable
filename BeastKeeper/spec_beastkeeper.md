# BeastKeeper - 巨兽收容所 3D Game Specification

## 1. 游戏概述

### 核心概念

玩家经营"巨兽收容所"，体验"捕获-养成-征战"的完整循环。

### 核心卖点

- 反差萌（幼崽vs巨兽）
- 割草爽感
- 收集养成成就感

### 一句话描述

玩家经营一个巨兽收容所，捕获受伤幼兽、喂养治疗、带着进化后的巨兽出去战斗。

---

## 2. 角色设定

| 角色 | 描述 | 进化路线 |
|------|------|----------|
| 格温妮 (Gwyneth) | 英雄主角 | - |
| 九头蛇 (Hydra) | 初始小蛇 | 幼崽 → 健康 → 巨型九头蛇 |
| 雷鹏鸟 (Thunder Bird) | 初始小鸟 | 幼崽 → 健康 → 巨型雷鹏鸟 |
| 黑暗灵 (Dark Spirit) | 杂鱼敌人 | - |
| 最终BOSS | 暗黑巨兽 | - |

---

## 3. 建筑系统

| 建筑 | 功能 | 升级效果 |
|------|------|----------|
| 造肉厂 (Meat Factory) | 自动产肉 | 产出效率提升 |
| 工人小屋 (Worker Hut) | 生成4个工人 | 自动收集资源 |

---

## 4. 资源系统

| 资源 | 用途 | 获取方式 |
|------|------|----------|
| 肉块 (Meat) | 喂养巨兽 | 造肉厂、击杀敌人 |
| 金币 (Coins) | 建造/升级 | 击杀敌人 |

---

## 5. 游戏解锁流程（严格顺序）

> **重要**: 每一步必须可达成，且完成后自动进入下一步

### 核心流程

| 步骤 | 事件 | 触发条件 | 资源需求 | 备注 |
|------|------|----------|----------|------|
| **1** | 捕获受伤的九头蛇 | 游戏开始 | 无 | 靠近九头蛇自动捕获 |
| **2** | 喂养九头蛇(1/5) | 九头蛇已捕获 | 10肉块 | 治愈，无技能选择 |
| **2+** | **敌人开始来袭** | 九头蛇捕获后 | 无 | 敌人掉落金币 |
| **3** | 九头蛇恢复健康 | 喂食完成 | 无 | 可自动攻击敌人 |
| **5** | 建造造肉厂 | 收集50金币 | 50金币 | 自动产肉 |
| **6** | 城外发现雷鹏鸟 | 造肉厂建成后 | 无 | 延迟2秒出现 |
| **7** | 捕获受伤的雷鹏鸟 | 发现后 | 无 | 靠近自动捕获 |
| **8** | 喂养雷鹏鸟(1/5) | 雷鹏鸟已捕获 | 10肉块 | 治愈，无技能选择 |
| **9** | 建造工人小屋 | 收集80金币 | 80金币 | 4工人自动收集 |
| **10** | 升级造肉厂 | 收集100金币 | 100金币 | 产肉效率翻倍 |

### 魔兽升级阶段（可自由顺序）

| 事件 | 触发条件 | 需求 | 结果 |
|------|----------|------|------|
| 喂养九头蛇(2/5) | 主动喂养 | 10肉块 | 选择技能Lv1 |
| 喂养九头蛇(3/5) | 主动喂养 | 10肉块 | 选择技能Lv2 |
| 喂养九头蛇(4/5) | 主动喂养 | 10肉块 | 选择技能Lv3 |
| 喂养九头蛇(5/5) | 主动喂养 | 10肉块 | 选择**终极技能**，进化巨型 |
| 喂养雷鹏鸟(2/5) | 主动喂养 | 10肉块 | 选择技能Lv1 |
| 喂养雷鹏鸟(3/5) | 主动喂养 | 10肉块 | 选择技能Lv2 |
| 喂养雷鹏鸟(4/5) | 主动喂养 | 10肉块 | 选择技能Lv3 |
| 喂养雷鹏鸟(5/5) | 主动喂养 | 10肉块 | 选择**终极技能**，进化巨型 |

### BOSS战

| 步骤 | 事件 | 触发条件 | 备注 |
|------|------|----------|------|
| **BOSS** | 最终BOSS出现 | **任一兽完成4次喂养** | 5秒后生成，HP 2000 |
| **胜利** | 击败BOSS | BOSS HP降至0 | 下载按钮+重新开始 |

---

## 6. 资源平衡

### 初始资源

- 肉块: **15** (足够第一次喂养)
- 金币: **0**

### 喂养成本

- 每次喂养消耗: **10肉块**
- 一次喂满即可进化

### 敌人掉落

- 每只黑暗灵: **15金币** + 30%概率掉落2肉块
- BOSS: 100金币 + 20肉块

---

## 7. 操作方式

- **WASD**: 键盘移动
- **虚拟摇杆**: 触屏/鼠标拖拽
- **教程**: 游戏开始前显示摇杆教程，静止等待玩家首次操作

---

## 8. 技术规格

- **引擎**: Three.js
- **视角**: 3D俯视角 (Orthographic Camera)
- **文件**: 单HTML文件，内嵌所有代码和资源
- **兼容**: PC + 移动端触屏

---

## 9. 实现细节

### 手动喂食系统

- 玩家通过UI面板的"喂食"按钮手动喂养巨兽
- 按钮显示肉块消耗量（如"🥩 喂食 (10肉块)"）

### 建筑标签可见性

| 标签 | 显示条件 |
|------|----------|
| 造肉厂 | step ≥ 4 且未建造 |
| 工人小屋 | step ≥ 8 且未建造 |
| 升级造肉厂 | step ≥ 9 且已建造且未升级 |

---

## 10. 魔兽技能系统

### 进化阶段与技能选择

| 阶段 | 喂养次数 | 技能选择 |
|------|----------|----------|
| 受伤 | 0 | 无 |
| 健康 | 1 | **无** (治愈不选) |
| 成长1 | 2 | 二选一普通技能 |
| 成长2 | 3 | 二选一普通技能 |
| 成长3 | 4 | 二选一普通技能 |
| 巨型 | 5 | 二选一**终极技能** |

### 九头蛇技能

| 升级 | 技能A | 技能B |
|------|-------|-------|
| 1 | 毒液增强 (+30%伤害) | 多头攻击 (2目标) |
| 2 | 剧毒喷射 (范围伤害) | 生命汲取 (伤害回血) |
| 3 | 毒气云 (持续伤害) | 快速再生 (+HP) |
| 终极 | **九头齐射** (9目标) | **毒龙吐息** (大范围) |

### 雷鹏鸟技能

| 升级 | 技能A | 技能B |
|------|-------|-------|
| 1 | 雷击强化 (+30%伤害) | 疾风 (+50%攻速) |
| 2 | 连锁闪电 (弹射3目标) | 风暴护盾 (减伤30%) |
| 3 | 雷云召唤 (范围雷击) | 冲刺攻击 |
| 终极 | **天雷降临** (全屏雷击) | **凤凰形态** (无敌+爆发) |

---

## 11. 围栏防御系统

### 围栏机制

- 围栏**不可摧毁** - 永久保护基地
- 敌人**无法进入**围栏区域 (边界 ±25)
- 敌人到达边界时会被阻挡在围栏外

---

## 12. Boss血条系统

- Boss出现时在屏幕顶部中央显示血条
- 显示Boss名称（黑暗巨兽）、当前HP/最大HP
- 血条实时更新，Boss被击败后隐藏

---

## 13. 音效系统

使用Web Audio API合成音效，无需加载外部文件：

| 事件 | 音效描述 |
|------|----------|
| 捕获魔兽 | 希望上升音 |
| 喂食 | 温柔滋养音 |
| 进化升级 | 史诗递进音 |
| 攻击发射 | 尖锐射击音 |
| 命中敌人 | 撞击音 |
| AOE爆炸 | 爆炸音 |
| 连锁闪电 | 电击音 |
| Boss出现 | 不祥警告音 |
| 胜利 | 胜利号角 |
| 技能选择 | 魔法叮咚 |
| 拾取物品 | 金币音 |
| 建筑完成 | 建造音 |

---

## 14. 伤害系统

### 魔兽攻击伤害（按阶段递增）

| 阶段 | 基础伤害 |
|------|----------|
| 受伤 | 0 |
| 健康 | 15 |
| 成长1 | 25 |
| 成长2 | 35 |
| 成长3 | 45 |
| 巨型 | 60 |

---

## 15. 引导箭头系统

- 未捕获的魔兽（九头蛇、雷鹏鸟）上方显示引导箭头
- 箭头有上下浮动动画吸引玩家注意
- 捕获后箭头自动消失
